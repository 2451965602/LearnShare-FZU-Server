-- ========================================
-- 资源搜索功能测试数据脚本
-- 生成时间：2025-01-27
-- 用途：为资源搜索功能提供完整的测试数据
-- ========================================

-- 清理现有测试数据（可选，谨慎使用）
-- DELETE FROM resource_tags WHERE resource_id IN (SELECT resource_id FROM resources WHERE resource_id BETWEEN 1000 AND 1999);
-- DELETE FROM resources WHERE resource_id BETWEEN 1000 AND 1999;
-- DELETE FROM tags WHERE tag_id BETWEEN 100 AND 199;

-- ========================================
-- 1. 插入学院数据
-- ========================================
INSERT IGNORE INTO `colleges` (`college_id`, `college_name`, `school`) VALUES
(1, '计算机与信息工程学院', '福州大学');

-- ========================================
-- 2. 插入角色数据
-- ========================================
INSERT IGNORE INTO `roles` (`role_id`, `role_name`, `description`) VALUES
(1, '学生', '普通学生用户，可以浏览和下载资源'),
(2, '教师', '教师用户，可以上传和管理资源');

-- ========================================
-- 3. 插入标签数据
-- ========================================
INSERT INTO `tags` (`tag_id`, `tag_name`) VALUES
(100, '算法'),
(101, '数据结构'),
(102, '机器学习'),
(103, '深度学习'),
(104, 'Python'),
(105, 'Java'),
(106, 'C++'),
(107, '前端开发'),
(108, '后端开发'),
(109, '数据库'),
(110, '操作系统'),
(111, '计算机网络'),
(112, '软件工程'),
(113, '人工智能'),
(114, '大数据'),
(115, '云计算'),
(116, '区块链'),
(117, '移动开发'),
(118, 'Web开发'),
(119, '游戏开发');

-- ========================================
-- 4. 插入专业数据（如果majors表存在）
-- ========================================
INSERT IGNORE INTO `majors` (`major_id`, `major_name`, `college_id`) VALUES
(1, '计算机科学与技术', 1),
(2, '软件工程', 1),
(3, '人工智能', 1),
(4, '数据科学与大数据技术', 1),
(5, '网络工程', 1);

-- ========================================
-- 5. 插入教师数据（如果teachers表存在）
-- ========================================
INSERT IGNORE INTO `teachers` (`teacher_id`, `name`, `college_id`, `introduction`) VALUES
(1, '张教授', 1, '计算机科学与技术专业教授，专注于算法与数据结构研究'),
(2, '李老师', 1, '人工智能领域副教授，机器学习专家'),
(3, '王老师', 1, '软件工程专业讲师，全栈开发经验丰富'),
(4, '陈教授', 1, '数据库系统专家，大数据处理研究方向'),
(5, '刘老师', 1, '网络安全与系统管理专家');

-- ========================================
-- 6. 插入课程数据（使用正确的字段）
-- ========================================
INSERT IGNORE INTO `courses` (`course_id`, `course_name`, `teacher_id`, `credit`, `major_id`, `grade`, `description`) VALUES
(1001, '数据结构与算法', 1, 4.0, 1, '2023级', '计算机科学基础课程，涵盖基本数据结构和算法设计与分析'),
(1002, '机器学习基础', 2, 3.0, 3, '2022级', '机器学习入门课程，包含理论基础和实践应用'),
(1003, '深度学习', 2, 3.0, 3, '2021级', '深度学习高级课程，神经网络理论与实现'),
(1004, 'Python程序设计', 3, 3.0, 1, '2023级', 'Python编程语言基础，从入门到进阶'),
(1005, 'Java程序设计', 3, 3.0, 2, '2023级', 'Java编程语言基础，面向对象程序设计'),
(1006, '前端开发技术', 3, 3.0, 2, '2022级', 'HTML、CSS、JavaScript等前端技术栈'),
(1007, '数据库系统', 4, 4.0, 1, '2022级', '数据库设计与管理，SQL语言与数据库优化'),
(1008, '操作系统原理', 5, 4.0, 1, '2022级', '操作系统核心概念和原理，进程管理与内存管理'),
(1009, '计算机网络', 5, 3.0, 5, '2022级', '网络协议和网络编程，TCP/IP协议栈'),
(1010, '软件工程', 3, 3.0, 2, '2021级', '软件开发方法论和项目管理，敏捷开发实践');

-- ========================================
-- 7. 插入用户数据（使用正确的字段）
-- ========================================
INSERT IGNORE INTO `users` (`user_id`, `username`, `password_hash`, `email`, `college_id`, `major_id`, `role_id`, `status`) VALUES
(2001, 'test_user_1', '$2a$10$example_hash_1', 'user1@test.com', 1, 1, 1, 'active'),
(2002, 'test_user_2', '$2a$10$example_hash_2', 'user2@test.com', 1, 2, 1, 'active'),
(2003, 'test_user_3', '$2a$10$example_hash_3', 'user3@test.com', 1, 3, 1, 'active'),
(2004, 'test_teacher_1', '$2a$10$example_hash_4', 'teacher1@test.com', 1, NULL, 2, 'active'),
(2005, 'test_teacher_2', '$2a$10$example_hash_5', 'teacher2@test.com', 1, NULL, 2, 'active');

-- ========================================
-- 8. 插入资源数据
-- ========================================
INSERT INTO `resources` (
    `resource_id`, `resource_name`, `description`, `resource_url`, `type`, `size`, 
    `uploader_id`, `course_id`, `download_count`, `average_rating`, `rating_count`, 
    `status`, `created_at`
) VALUES
-- 算法相关资源
(1001, '算法导论第四版PDF', '经典算法教材，涵盖各种基本算法和高级算法设计技巧，适合计算机科学专业学生深入学习', '/files/algorithm/introduction_to_algorithms_4th.pdf', 'pdf', 15728640, 2004, 1001, 245, 4.8, 42, 'normal', '2024-12-15 10:30:00'),

(1002, '算法竞赛入门经典', '算法竞赛必备教材，包含大量编程题目和解题技巧，适合ACM竞赛准备', '/files/algorithm/competitive_programming.pdf', 'pdf', 12582912, 2001, 1001, 189, 4.6, 28, 'normal', '2024-12-20 14:20:00'),

(1003, '数据结构可视化演示PPT', '通过动画演示各种数据结构的操作过程，包括栈、队列、树、图等基本数据结构', '/files/datastructure/visualization_demo.pptx', 'pptx', 8388608, 2004, 1001, 156, 4.4, 35, 'normal', '2025-01-05 09:15:00'),

-- Python相关资源
(1004, 'Python机器学习实战指南', 'Python机器学习完整教程，包含scikit-learn、pandas、numpy等库的使用方法和实际项目案例', '/files/python/python_ml_practice.pdf', 'pdf', 18874368, 2005, 1002, 298, 4.9, 67, 'normal', '2024-11-28 16:45:00'),

(1005, 'Python编程从入门到精通', 'Python基础语法到高级特性的完整教程，适合零基础学习者，包含大量练习题', '/files/python/python_complete_guide.pdf', 'pdf', 10485760, 2002, 1004, 412, 4.7, 89, 'normal', '2024-12-01 11:30:00'),

(1006, 'Python数据分析项目集', '10个完整的Python数据分析项目，涵盖数据清洗、可视化、统计分析等技能', '/files/python/data_analysis_projects.zip', 'zip', 25165824, 2003, 1004, 167, 4.5, 31, 'normal', '2025-01-10 13:20:00'),

-- 深度学习相关资源
(1007, '深度学习理论与实践', '深度学习核心理论讲解，包含神经网络、卷积网络、循环网络等内容，配有TensorFlow实现', '/files/deeplearning/dl_theory_practice.pdf', 'pdf', 22020096, 2005, 1003, 134, 4.9, 29, 'normal', '2024-12-10 08:00:00'),

(1008, 'PyTorch深度学习框架教程', 'PyTorch从基础到高级的完整教程，包含计算机视觉和自然语言处理应用', '/files/deeplearning/pytorch_tutorial.docx', 'docx', 14680064, 2004, 1003, 203, 4.6, 38, 'normal', '2024-12-25 15:30:00'),

-- Java相关资源
(1009, 'Java核心技术卷I基础知识', 'Java编程语言核心概念和基础知识，适合Java初学者和进阶开发者', '/files/java/java_core_vol1.pdf', 'pdf', 16777216, 2001, 1005, 278, 4.5, 52, 'normal', '2024-11-15 12:00:00'),

(1010, 'Spring Boot微服务开发实战', 'Spring Boot框架实战教程，包含RESTful API开发、数据库集成、安全认证等内容', '/files/java/springboot_microservices.pdf', 'pdf', 19922944, 2005, 1005, 145, 4.7, 26, 'normal', '2025-01-02 10:45:00'),

-- 前端开发相关资源
(1011, 'Vue.js 3.0完整开发指南', 'Vue.js 3.0从基础到高级的完整开发教程，包含组件开发、状态管理、路由等', '/files/frontend/vuejs3_guide.pdf', 'pdf', 13631488, 2002, 1006, 321, 4.8, 71, 'normal', '2024-12-05 14:15:00'),

(1012, 'React Hooks实战项目', '基于React Hooks的实际项目开发案例，包含5个完整的Web应用项目', '/files/frontend/react_hooks_projects.zip', 'zip', 31457280, 2003, 1006, 198, 4.6, 44, 'normal', '2024-12-18 09:30:00'),

-- 数据库相关资源
(1013, 'MySQL高性能优化指南', 'MySQL数据库性能优化完整指南，包含索引优化、查询优化、架构设计等内容', '/files/database/mysql_optimization.pdf', 'pdf', 11534336, 2004, 1007, 167, 4.7, 33, 'normal', '2024-11-20 16:20:00'),

(1014, 'Redis缓存技术实战', 'Redis缓存系统的理论和实践，包含数据结构、持久化、集群等高级特性', '/files/database/redis_practice.docx', 'docx', 9437184, 2005, 1007, 89, 4.4, 19, 'normal', '2025-01-08 11:10:00'),

-- 操作系统相关资源
(1015, 'Linux系统管理与运维', 'Linux操作系统管理和运维实战教程，包含系统配置、服务管理、性能监控等', '/files/os/linux_administration.pdf', 'pdf', 17825792, 2001, 1008, 134, 4.5, 28, 'normal', '2024-12-12 13:45:00'),

-- 网络相关资源
(1016, 'TCP/IP协议详解与网络编程', 'TCP/IP协议栈详细解析和网络编程实践，适合网络工程师和后端开发者', '/files/network/tcpip_programming.pdf', 'pdf', 20971520, 2004, 1009, 112, 4.6, 24, 'normal', '2024-11-25 10:00:00'),

-- 软件工程相关资源
(1017, '敏捷开发与Scrum实践', '敏捷软件开发方法论和Scrum框架实践指南，包含项目管理和团队协作', '/files/se/agile_scrum_practice.pptx', 'pptx', 7340032, 2005, 1010, 98, 4.3, 21, 'normal', '2024-12-30 15:00:00'),

-- 人工智能相关资源
(1018, '自然语言处理基础与应用', 'NLP基础理论和实际应用，包含文本处理、情感分析、机器翻译等内容', '/files/ai/nlp_fundamentals.pdf', 'pdf', 16252928, 2002, 1002, 156, 4.8, 35, 'normal', '2024-12-08 12:30:00'),

-- 大数据相关资源
(1019, 'Hadoop生态系统实战', 'Hadoop大数据处理平台完整教程，包含HDFS、MapReduce、Spark等组件', '/files/bigdata/hadoop_ecosystem.zip', 'zip', 28311552, 2003, 1002, 87, 4.4, 16, 'normal', '2025-01-12 14:00:00'),

-- 云计算相关资源
(1020, 'Docker容器化技术实践', 'Docker容器技术从入门到实战，包含镜像制作、容器编排、微服务部署', '/files/cloud/docker_practice.pdf', 'pdf', 12058624, 2001, 1010, 203, 4.7, 41, 'normal', '2024-12-22 11:15:00');

-- ========================================
-- 9. 插入资源标签关联数据
-- ========================================
INSERT INTO `resource_tags` (`resource_id`, `tag_id`) VALUES
-- 算法导论 - 算法、数据结构
(1001, 100), (1001, 101),

-- 算法竞赛入门 - 算法、C++
(1002, 100), (1002, 106),

-- 数据结构可视化 - 数据结构、算法
(1003, 101), (1003, 100),

-- Python机器学习 - Python、机器学习、人工智能
(1004, 104), (1004, 102), (1004, 113),

-- Python编程入门 - Python
(1005, 104),

-- Python数据分析 - Python、大数据
(1006, 104), (1006, 114),

-- 深度学习理论 - 深度学习、机器学习、人工智能、Python
(1007, 103), (1007, 102), (1007, 113), (1007, 104),

-- PyTorch教程 - 深度学习、Python、人工智能
(1008, 103), (1008, 104), (1008, 113),

-- Java核心技术 - Java
(1009, 105),

-- Spring Boot - Java、后端开发、Web开发
(1010, 105), (1010, 108), (1010, 118),

-- Vue.js指南 - 前端开发、Web开发
(1011, 107), (1011, 118),

-- React项目 - 前端开发、Web开发
(1012, 107), (1012, 118),

-- MySQL优化 - 数据库、后端开发
(1013, 109), (1013, 108),

-- Redis实战 - 数据库、后端开发
(1014, 109), (1014, 108),

-- Linux管理 - 操作系统
(1015, 110),

-- TCP/IP协议 - 计算机网络、后端开发
(1016, 111), (1016, 108),

-- 敏捷开发 - 软件工程
(1017, 112),

-- 自然语言处理 - 人工智能、机器学习、Python
(1018, 113), (1018, 102), (1018, 104),

-- Hadoop生态 - 大数据、Java
(1019, 114), (1019, 105),

-- Docker实践 - 云计算、后端开发
(1020, 115), (1020, 108);

-- ========================================
-- 10. 插入资源评分数据（可选）
-- ========================================
INSERT INTO `resource_ratings` (
    `user_id`, `resource_id`, `recommendation`, `is_visible`, `created_at`
) VALUES
-- 为热门资源添加一些评分
(2001, 1001, 5.0, TRUE, '2024-12-16 10:00:00'),
(2002, 1001, 4.5, TRUE, '2024-12-17 14:30:00'),
(2003, 1001, 5.0, TRUE, '2024-12-18 09:15:00'),

(2001, 1004, 5.0, TRUE, '2024-11-29 11:20:00'),
(2002, 1004, 4.8, TRUE, '2024-11-30 16:45:00'),
(2003, 1004, 5.0, TRUE, '2024-12-01 08:30:00'),

(2001, 1005, 4.5, TRUE, '2024-12-02 13:10:00'),
(2002, 1005, 4.8, TRUE, '2024-12-03 10:25:00'),
(2003, 1005, 4.7, TRUE, '2024-12-04 15:40:00'),

(2001, 1007, 5.0, TRUE, '2024-12-11 09:30:00'),
(2002, 1007, 4.9, TRUE, '2024-12-12 14:15:00'),

(2001, 1011, 4.8, TRUE, '2024-12-06 11:45:00'),
(2002, 1011, 4.7, TRUE, '2024-12-07 16:20:00'),
(2003, 1011, 5.0, TRUE, '2024-12-08 12:30:00');

-- ========================================
-- 11. 插入资源评论数据（可选）
-- ========================================
INSERT INTO `resource_comments` (
    `user_id`, `resource_id`, `content`, `parent_id`, `likes`, `is_visible`, `status`, `created_at`
) VALUES
(2001, 1001, '这本算法导论真的是经典中的经典，讲解非常详细，适合深入学习算法理论。', NULL, 15, TRUE, 'normal', '2024-12-16 10:30:00'),
(2002, 1001, '内容很全面，但是对初学者来说可能有点难度，建议先学习基础数据结构。', NULL, 8, TRUE, 'normal', '2024-12-17 15:00:00'),
(2003, 1001, '配合课程学习效果很好，例题和习题都很有价值。', NULL, 12, TRUE, 'normal', '2024-12-18 09:45:00'),

(2001, 1004, 'Python机器学习的入门神器！代码示例很实用，跟着做完收获很大。', NULL, 23, TRUE, 'normal', '2024-11-29 12:00:00'),
(2002, 1004, '理论和实践结合得很好，特别是scikit-learn的使用讲解得很清楚。', NULL, 18, TRUE, 'normal', '2024-11-30 17:15:00'),

(2001, 1005, '适合Python初学者，从基础语法到高级特性都有涉及，推荐！', NULL, 20, TRUE, 'normal', '2024-12-02 13:45:00'),
(2002, 1005, '练习题很多，对巩固知识点很有帮助。', NULL, 14, TRUE, 'normal', '2024-12-03 10:50:00'),

(2001, 1007, '深度学习理论讲解得很透彻，TensorFlow的实现也很详细。', NULL, 16, TRUE, 'normal', '2024-12-11 10:00:00'),
(2002, 1007, '内容比较深入，需要有一定的数学基础，但是质量很高。', NULL, 11, TRUE, 'normal', '2024-12-12 14:45:00'),

(2001, 1011, 'Vue 3.0的新特性讲解得很全面，对前端开发很有帮助。', NULL, 19, TRUE, 'normal', '2024-12-06 12:15:00'),
(2002, 1011, '实例代码很实用，跟着教程可以快速上手Vue 3.0开发。', NULL, 13, TRUE, 'normal', '2024-12-07 16:50:00');

-- ========================================
-- 12. 验证数据插入结果
-- ========================================
-- 查看插入的数据统计
SELECT 
    '标签数量' as '数据类型',
    COUNT(*) as '数量'
FROM tags 
WHERE tag_id BETWEEN 100 AND 199

UNION ALL

SELECT 
    '资源数量' as '数据类型',
    COUNT(*) as '数量'
FROM resources 
WHERE resource_id BETWEEN 1001 AND 1020

UNION ALL

SELECT 
    '标签关联数量' as '数据类型',
    COUNT(*) as '数量'
FROM resource_tags 
WHERE resource_id BETWEEN 1001 AND 1020;

-- 查看各标签的资源数量分布
SELECT 
    t.tag_name as '标签名称',
    COUNT(rt.resource_id) as '关联资源数量'
FROM tags t
LEFT JOIN resource_tags rt ON t.tag_id = rt.tag_id
WHERE t.tag_id BETWEEN 100 AND 199
GROUP BY t.tag_id, t.tag_name
ORDER BY COUNT(rt.resource_id) DESC;

-- 查看各课程的资源数量分布
SELECT 
    course_id as '课程ID',
    COUNT(*) as '资源数量',
    AVG(download_count) as '平均下载量',
    AVG(average_rating) as '平均评分'
FROM resources 
WHERE resource_id BETWEEN 1001 AND 1020
GROUP BY course_id
ORDER BY COUNT(*) DESC;

-- ========================================
-- 脚本执行完成
-- ========================================